<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>小e健康管理平台</title>
    <meta name="keywords" content="小e健康管理平台管理系统">
    <meta name="description" content="小e健康管理平台系统">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/login.css" rel="stylesheet">
         <link href="https://www.ruicitijian.com/public/stylesheets/ratchet.min.css?v48db" rel="stylesheet" type="text/css" />
<link href="https://www.ruicitijian.com/public/stylesheets/ratchet-theme.min.css?v48db" rel="stylesheet" type="text/css" />
<link href="https://www.ruicitijian.com/public/stylesheets/font-awesome.min.css?v48db" rel="stylesheet" type="text/css" />
<script src="https://www.ruicitijian.com/public/javascripts/jquery.min.js?v48db" type="text/javascript" charset="utf-8" ></script>
<script src="https://www.ruicitijian.com/public/javascripts/jquery.cookie.js?v48db" type="text/javascript" charset="utf-8" ></script>
<script src="https://www.ruicitijian.com/public/javascripts/ratchet.min.js?v48db" type="text/javascript" charset="utf-8" ></script>
<!--header common-->
        <link rel="stylesheet" href="https://www.ruicitijian.com/themes/mobile/ruici/statics/theme.css?v48db">
        <link rel="stylesheet" href="https://www.ruicitijian.com/themes/mobile/ruici/statics/index.css?v48db">
        <link rel="stylesheet" href="https://www.ruicitijian.com/themes/mobile/ruici/statics/public.css?v48db">
        <link rel="stylesheet" href="https://www.ruicitijian.com/themes/mobile/ruici/statics/swiper.css?v48db">
        <script src="https://www.ruicitijian.com/themes/mobile/ruici/statics/swiper.js?v48db"></script>
        <style>
.activity_background{padding-bottom: 0px; background:#ff0a1b;}    
.activity-hotcoupons{}
.activity-hotpic,.activity-hotcoupons{line-height:0;text-align: center;padding-bottom:0;overflow: hidden;}
.activity-hotpic img {width:100%}
.activity-hotpic,.activity-hotcoupons{line-height:0;text-align: center;padding-bottom: 0px;overflow: hidden;}
.activity_background .activity-hotpic{padding-bottom: 0px;overflow: hidden;}    
    .activity-hotcoupons .activity-detailcoupons {width:33.33%;float:left;}
    .tonglan-youhuiquan .activity-hotcoupons .activity-detailcoupons {width:100%;}
    .activity-hotcoupons .activity-detailcoupons img{width:100%;}
</style>

    <!--[if lt IE 9]>
    <meta http-equiv="refresh" content="0;ie.html"/>
    <![endif]-->
    <script>
        if (window.top !== window.self) {
            window.top.location = window.location;
        }
    </script>

</head>

<body>

	<div class="product-tj">
	   <img src="https://www.ruicitijian.com/public/images/fe/21/d9/164a2c9072717b508399681e078ca195c019cf7a.jpg?95410_OW640_OH144" alt="企业团购专区">
	</div>

	<div class="hot-prod">
		<div class="pull-left pl-goods"  th:each="entries,stat:${listgood}">
			<div class="wrapper-wy">
				<div class="img-wy">
					<a href="https://www.ruicitijian.com/m/item-65.html" th:href="@{'/healthlogin/p/'+${entries['id']}}"> 
						<img
						src="https://www.ruicitijian.com/public/images/9d/d6/b8/3ec2a8191808c6d103f75ff094316f9e1d405658.png?09771_OW195_OH195" th:attr="src=@{${entries['listPicUrl']}}"
						>
					</a>
				</div>
				<div class="caption">
					<div class="title-two">
						<a href="https://www.ruicitijian.com/m/item-65.html">[[${entries['goodName']}]]</a>
					</div>
					<div class="tit-add">
						<span>￥</span><strong>[[${entries['retailPrice']/100}]]</strong> <span class="tit-ad2">刊例价:[[${entries['counterPrice']/100}]]</span>
						<a title="立即购买" href="https://www.ruicitijian.com/m/item-65.html"
							class="btn-2">立即<br>购买
						</a>
					</div>
				</div>
			</div>
		</div>

	</div>

	<div class="signup-footer">
        <div class="pull-left">&copy; 2019 All Rights Reserved. 小e健康管理平台
        </div>
    </div>


<script th:inline="javascript"> var ctx = [[@{/}]] ; </script>
<!-- 全局js -->
<script src="/js/jquery.min.js?v=2.1.4" th:src="@{/js/jquery.min.js?v=2.1.4}"></script>
<script src="/js/bootstrap.min.js?v=3.3.6" th:src="@{/js/bootstrap.min.js?v=3.3.6}"></script>

<!-- 自定义js -->
<script src="/js/content.js?v=1.0.0" th:src="@{/js/content.js?v=1.0.0}"></script>

<!-- jQuery Validation plugin javascript-->
<script src="/js/ajax-util.js"></script>
<script src="/js/plugins/validate/jquery.validate.min.js" th:src="@{/js/plugins/validate/jquery.validate.min.js}"></script>
<script src="/js/plugins/validate/messages_zh.min.js" th:src="@{/js/plugins/validate/messages_zh.min.js}"></script>
<script src="/js/plugins/layer/layer.min.js" th:src="@{/js/plugins/layer/layer.min.js}"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $("#login").on('click',function(){$("#signupForm").submit();});
        validateRule();
        
    });

    $.validator.setDefaults({
        submitHandler: function () {
            login();
        }
    });

    function login() {
    	var idnumber = $("#idcard").val();
    	if(parseInt(idnumber.substr(16,1))%2==1){
    		$("#gender").val(1);
    	}
        $.ajax({
            type: "POST",
            url: ctx+"healthlogin/regsave",
            data: $('#signupForm').serialize(),
            success: function (r) {
                 if (r.code == 0) {
                    var index = layer.load(1, {
                        shade: [0.1,'#fff'] //0.1透明度的白色背景
                    });
                    layer.msg("注册成功，请选择体检套餐"); 
                    parent.location.href = '/healthlogin/booking';
                } else {
                	layer.msg(r.message); 
                }
            },
        });
    }

    function validateRule() {
        var icon = "<i class='fa fa-times-circle'></i> ";
        $("#signupForm").validate({
            rules: {
            	name: {
                    required: true
                },
    			idcard : {
    				required : true,
    				isIdCardNo: true
    			},
    			mobile : {
    				required : true,
                    maxlength:11,
                    maxlength:11,
                    isphoneNum:true
    			},
                marry: {
                    required: true
                },
            },
            messages: {
            	name: {
                    required: icon + "请输入您的用户名",
                },
    			idcard : {
    				required : icon + "请输入身份证号码",
    				isIdCardNo : icon + "请输入正确的身份证号码",
    			},
    			mobile :{
    	            required: icon + "请输入手机号",	
    	            maxlength: icon + "请填写11位的手机号",
    	            minlength: icon + "请填写11位的手机号",
    	            isphoneNum: icon + "请填写正确的手机号码"
    			},
                marry: {
                    required: icon + "您选择婚否",
                }
            }
        })
    }
    
    function checkidcard(num){
    	var len = num.length, re;
    	if (len == 15)
    		re = new RegExp(/^(\d{6})()?(\d{2})(\d{2})(\d{2})(\d{3})$/);
    	else if (len == 18)
    		re = new RegExp(/^(\d{6})()?(\d{4})(\d{2})(\d{2})(\d{3})(\d)$/);
    	else{
    		//alert("请输入15或18位身份证号,您输入的是 "+len+ "位"); 
    		return false;
    	}
    	var a = num.match(re);
    	if (a != null){
    		if (len==15){
    			var D = new Date("19"+a[3]+"/"+a[4]+"/"+a[5]);
    			var B = D.getYear()==a[3]&&(D.getMonth()+1)==a[4]&&D.getDate()==a[5];
    		}else{
    			var D = new Date(a[3]+"/"+a[4]+"/"+a[5]);
    			var B = D.getFullYear()==a[3]&&(D.getMonth()+1)==a[4]&&D.getDate()==a[5];
    		}
    		if (!B){
    			//alert("输入的身份证号 "+ a[0] +" 里出生日期不对！"); 
    			return false;
    		}
    	}
     
    	return true;
    } 
  //添加验证方法 (身份证号码验证)
    jQuery.validator.addMethod("isIdCardNo", function(value, element) {   
    	return this.optional(element) || checkidcard(value);   
    }, "请正确输入您的身份证号码"); 

    //自定义手机号验证
    jQuery.validator.addMethod("isphoneNum", function(value, element) {
       // debugger
        var length = value.length;
        var mobile = /^1[3|4|5|6|7|8|9]{1}[0-9]{9}$/;
        return this.optional(element) || (length == 11 && mobile.test(value));
    }, "请正确填写您的手机号码");
</script>
</body>
</html>
